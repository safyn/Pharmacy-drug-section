<!--
Name : dispenseDrug.html.php
Purpose : Display dispenseDrug form and allow the user to dispense prescribed drugs. 
Author: Krzysztof Bas 
Date: 27/03/2020
-->
<!DOCTYPE HTML>
<!--HTML declaration-->
<html lang="en-UK">
<!--Start of HTML tag-->
<?php // Start of php tag
session_start(); //start the session

// if a session is set for user, don't do anything
if (isset($_SESSION['user'])) {
} else {
	// if sesion is not set, redirect user to the login page
	header("Location: https://c2ppharmacy.candept.com/index.html.php");
}
?>
<!-- End of php tag-->

<head>
    <!-- Start of HEAD tag -->

    <!-- End of php tag-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Link CSS, JavaScript and PHP files to the webside-->
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/button.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/profile.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/menu.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/section.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/footer.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/newSubMenu.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/drugsForm.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/table.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/connection.php" media="all">
    <script src="/javaScript/logIn.js"></script>
    <link rel="icon" href="_Images/Logo.ico">
    <meta name="" content="Pharmacy System">
    <title>Dispense Drug</title>


</head><!-- End of HEAD tag-->


<body>
    <!-- Start of Body tag -->

    <img src="/logo.png" id="logo" height="100" width="100"> <!-- insert Logo and initialise its size on the webside -->
    <!-- Display the user of the current session -->
    <div id="profile">
        <!-- Start of profile div -->

        <div id="text">
            <p id="Name"><?php echo $_SESSION['user']; ?></p>
        </div>

        <div id="image">
            <img src="/logo.png"> <!-- Display logo inside of menu -->
        </div>

        <div id="menu">
            <!-- Start Menu div -->
            <!-- Redirect to the webside when "Settings" button is clicked. -->
            <a href="/settings.html.php" target="_self"><button>Settings</button></a><br />
            <!-- link form with close.php file -->
            <form action="/close.php" method="POST">
                <!-- Start of Form -->
                <!-- On button click send data to the close.php that closes session and connection -->
                <button type="submit" id="logout" value="logout">LogOut</button>
            </form><!-- End of Form -->
        </div> <!-- End of Menu div -->
    </div><!-- End of profile div -->

    <nav>
        <!-- Start of NAV - block of navigation links -->
        <ul id="mainMenu">
            <!-- Start of main menu list -->
            <li><a href="/main.html.php"><button type="button" id="mainMenu">Main Menu</button></a></li>
            <li><a href="/counterSales.html.php"><button type="button" id="mainMenu"> Sales</button></a></li>
            <li><a href="/Drug Krzysztof Bas c00239768/amendDrug.html.php"><button type="button"id="mainMenu">Drugs</button></a></li>
            <li><a href="/stockControl.html.php"><button type="button" id="mainMenu">Stock </button></a></li>
            <li><a href="/supplierAccounts.html.php"><button type="button" id="mainMenu">Suppliers </button></a></li>
            <li><a href="/fileMaintenance.html.php"><button type="button" id="mainMenu">Maintenance</button></a></li>
            <li><a href="/reports.html.php"><button type="button" id="mainMenu">Reports</button></a></li>
        </ul>
        <!--End of main menu list-->
    </nav><!-- End of NAV -->

    <div id="content">
        <!-- Start of content div -->
        <section>
            <!--Main Content here This is Where the indivual work starts-->
            <h1>Main Menu</h1> <!-- Main menu header -->

            <div class="grid">

                <ul id="subMenu">
                    <!-- Start of subMenu list  -->
                    <!-- Add Drug button redirects to the "Add Drug" form -->
                    <li><a href="/Drug Krzysztof Bas c00239768/addDrug.html.php"><button type="button" id="sideMenu">Add
                                Drug</button></a></li>
                    <!-- Amend/View Drug button redirects to the "Amend/View Drug" form which allows viewing and drug modification-->
                    <li><a href="/Drug Krzysztof Bas c00239768/amendDrug.html.php"><button type="button"
                                id="sideMenu">Amend/View Drug</button></a></li>
                    <!-- Delete Drug button redirects to the "Delete Drug" form which allows deletion of the drug -->
                    <li><a href="/Drug Krzysztof Bas c00239768/deleteDrug.html.php"><button type="button"
                                id="sideMenu">Delete Drug</button></a></li>
                    <!-- Dispense drug to a customer  -->
                    <li><a href="/Drug Krzysztof Bas c00239768/dispenseDrugs.html.php"><button type="button"
                                id="sideMenu">Dispense Drugs</button></a></li>
                </ul>
                <!--sub Menu Bar-->

                <div id="database">
                    <!--Start of database div-->
                    <div id="line">
                        <!-- Start of line div it displays drug listbox and amend/viev button-->

                        <p>&nbsp;</p>
                        <?php include 'php/customerListbox.php' ?>
                        <!-- customer listbox-->
                        <p>&nbsp;</p>
                        <script src="javaScript/amendDrug.js"></script> <!-- include file with necessary js functions-->
                        <script src="javaScript/idGenerator.js"></script> <!-- include id generator-->


                    </div>


                    <form id="dispenseForm" method="post" action="php/updatePrescription.php">
                        <!-- Start of delete Drug form on submit "confirmCheck" checks if fields are enabled-->


                        <div class="row">
                            <!-- Start of row ONE that displays customer details -->

                            <div class="columns">
                                <!-- Column One-->
                                <label for="customerName">Name:</label>
                                <input type="text" name="customerName" id="customerName" required readonly>
                            </div>

                            <div class="columns">
                                <!-- Column Two-->
                                <label for="customerAddress">Address:</label>
                                <input type="text" name="customerAddress" id="customerAddress" required readonly>
                            </div>

                            <div class="columns">
                                <!-- Column Three-->
                                <label for="customerDOB">Date of Birth:</label>
                                <input type="text" name="customerDOB" id="customerDOB" required readonly>
                            </div>
                        </div><br><!-- End of row ONE-->


                        <div class="row">
                            <!-- Start of row TWO used to display form as one row -->
                            <div class="column">
                                <!-- Start of column div used to display fields in the same column -->
                                <!-- FIRST COLUMN -->
                                <!-- Start of drugID paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="doctorName">Doctor:</label><!-- drugID label -->
                                        <?php include 'php/doctorListbox.php' ?>
                                    </p>
                                </div><br>

                                <!-- End of drugID paragraph -->

                                <!-- Start of Brand Name paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="brandName" id="brandName">Drug Name:</label>
                                        <!-- Brand Name label -->
                                        <!--Brand Name field, displays Drug Brand Name, allows letters -->
                                        <?php include 'php/drugName.php' ?>
                                    </p>
                                </div>
                                <!-- End of Brand Name paragraph -->

                                <!-- Start of Drug ID paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="drugID">Drug ID:</label><!-- drug id label -->
                                        <input type="text" name="drugID" id="drugID" readonly>
                                    </p>
                                </div>
                                <!-- End of Brand Name paragraph -->

                                <!-- Start of Unit price paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="drugUnitPrice">Unit Price:</label><!-- Brand Name label -->
                                        <input type="number" name="drugUnitPrice" id="drugUnitPrice" readonly>

                                    </p>
                                </div>
                                <!-- End of unit price paragraph -->

                                <!-- Start of "Strength" paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="strength">Strength:</label><!-- label for Strength select tag -->
                                        <select name="strength" id="strength">
                                            <!-- Select tag used to display predefined option values -->
                                            <option value="" disabled selected></option>
                                            <!-- Disabled, selected option with empty value used as a placeholder -->
                                            <!-- Selectable options -->
                                            <option value="1">500mg</option>
                                            <option value="2">1000mg</option>
                                            <option value="4">2000mg</option>
                                            <option value="1">1 tablet</option>
                                            <option value="2">2 tablets</option>
                                            <option value="3">3 tablets</option>
                                            <option value="4">4 tablets</option>
                                            <option value="5">5 tablets</option>
                                        </select><!-- End of Strength select tag -->
                                    </p>
                                </div>
                                <!-- End of "Strength" paragraph -->



                                <?php include 'php/nextPrescriptionID.php' ?>
                                <!-- Prescription ID tracker/counter -->

                            </div>
                            <!--END OF FIRST COLUMN -->

                            <div class="column">
                                <!-- SECOND COLUMN -->

                                <!-- Start of prescription date paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="prescriptionDate">Date:</label><!-- label for prescription date -->
                                        <input type="date" id="prescriptionDate" oninput='saveValue(this);'>
                                    </p>
                                </div><br>
                                <!-- End of "supplierID" paragraph -->

                                <!-- Start of "frequency" paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="frequency">Frequency:</label><!-- label for Strength select tag -->
                                        <select name="frequency" id="frequency">
                                            <!-- Select tag used to display predefined option values -->
                                            <option value="" disabled selected></option>
                                            <!-- Disabled, selected option with empty value used as a placeholder -->
                                            <!-- Selectable options -->
                                            <option value="1">Once a day</option>
                                            <option value="2">Twice a day</option>
                                            <option value="3">Three times a day</option>
                                            <option value="4">Four times a day</option>
                                            <option value="5">Six times a day</option>
                                            <option value="6">Six times a day</option>

                                        </select><!-- End of Strength select tag -->
                                    </p>
                                </div>
                                <!-- End of "frequency" paragraph -->


                                <!-- Start of "cycle" paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="cycle">Dosage length</label><!-- label for Strength select tag -->
                                        <select name="cycle" id="cycle">
                                            <!-- Select tag used to display predefined option values -->
                                            <option value="" disabled selected></option>
                                            <!-- Disabled, selected option with empty value used as a placeholder -->
                                            <!-- Selectable options -->
                                            <option value="1">1 Day</option>
                                            <option value="2">2 Days</option>
                                            <option value="3">3 Days</option>
                                            <option value="4">3 Days</option>
                                            <option value="5">5 Days</option>
                                            <option value="7">1 Week</option>
                                            <option value="14">2 Weeks</option>
                                            <option value="28">4 Weeks</option>

                                        </select><!-- End of Strength select tag -->
                                    </p>
                                </div>
                                <!-- End of "Strength" paragraph -->

                                <!-- Start of "Instructions for use" paragraph -->
                                <div class="inputbox">
                                    <!--inputbox div used to style form fields -->
                                    <p>
                                        <label for="instructions">Instructions for use:</label>
                                        <!-- label for instructions textarea -->
                                        <!--Textarea that stores Instructions for use of Drug -->
                                        <textarea name="instructions" id="instructions" rows="5" cols="5"></textarea>
                                    </p>
                                </div>
                                <!-- Start of "Instructions for use" paragraph -->

                            </div>
                            <!--END OF SECOND COLUMN -->
                        </div>
                        <!--End of Row TWO div -->

                        <p>
                            <input type="submit" value="Add Drug" id="addPrescriptionDrug"
                                formaction="php/prescriptionDrug.php">
                            <!--Submit button that adds Drug to a prescription and updates the stock count -->
                        </p>

                        <p>&nbsp;</p><br>

                        <script type="text/javascript">	loadSessionValues();</script>
                        <!--load values from the session storage -->

                        <?php include 'php/loadTable.php' ?>
                        <!--load and populate table -->

                        <p>&nbsp;</p>

                        <?php include 'php/prescriptionSum.php' ?>
                        <!--print out the current total price of the prescription -->



                    </form>
                    <!--End of Amend/View Drug form -->

                    <div id="actions">
                        <!-- div for form action buttons -->
                        <!--submits the form -->
                        <button type="submit" form="dispenseForm" onclick="sessionStorage.clear();" id="actions">Process
                            Prescription</button>
                        <!--Clears the form -->
                        <button type="reset" form="dispenseForm" id="actions">Clear Form</button>

                    </div>
                    <!--End of form action buttons div -->



                </div>
                <!--End of database div-->
            </div>
            <!--End of grid div-->
        </section>
        <!--End of section-->
    </div>
    <!--End of content-->

    <footer>
        <!--Start of footer-->
        <!--Paragraph with Names and student numbers of Developers-->
        <p>Website made by:<br /><br />
            <strong>Przemyslaw Twardowski: C00224251</strong><br />
            <strong>Michal Matusiewicz: C00231687</strong><br />
            <strong>Krzysztof Bas: C00238768</strong><br />
            <strong>Robert Binkowski: C00237917</strong><br /><br />
            <script>
                document.write(document.title)
            </script> 2019-
            <script>
                document.write(new Date().getFullYear())
            </script>. @ rights reserved
        </p>
    </footer>
    <!--End of footer-->
</body>
<!--End of body tag-->

</html>
<!--End of html tag-->